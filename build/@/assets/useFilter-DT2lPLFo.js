import{A as Ie,c as Me}from"./browser-iHK-42tw.js";import{d as _,u as Ye}from"./Layout-BSBHbhJp.js";import{c as ae,g as ie,r as n,h as ze,S as Ze}from"./index-BJRbsysg.js";import"./httpService-DFqb7dq4.js";import{a as I}from"./toast-DYbhU_bb.js";var ue={exports:{}};(function(S,x){(function(T,m){S.exports=m()})(ae,function(){return function(T,m,b){m.prototype.isBetween=function(w,D,l,h){var c=b(w),y=b(D),R=(h=h||"()")[0]==="(",U=h[1]===")";return(R?this.isAfter(c,l):!this.isBefore(c,l))&&(U?this.isBefore(y,l):!this.isAfter(y,l))||(R?this.isBefore(c,l):!this.isAfter(c,l))&&(U?this.isAfter(y,l):!this.isBefore(y,l))}}})})(ue);var $e=ue.exports;const Ge=ie($e);var de={exports:{}};(function(S,x){(function(T,m){S.exports=m()})(ae,function(){return function(T,m,b){m.prototype.isToday=function(){var w="YYYY-MM-DD",D=b();return this.format(w)===D.format(w)}}})})(de);var He=de.exports;const ke=ie(He),wt=S=>{new Ie({allErrors:!0});const[x,T]=n.useState(""),[m,b]=n.useState(""),[w,D]=n.useState(""),[l,h]=n.useState(""),[c,y]=n.useState(""),[R,U]=n.useState(""),[C,k]=n.useState(""),[g,q]=n.useState(""),[A,K]=n.useState(""),[le,ce]=n.useState(""),[P,pe]=n.useState(""),[M,me]=n.useState(""),[fe,Se]=n.useState([]),[we,Ce]=n.useState([]),[ge,Le]=n.useState([]),[Y,ye]=n.useState(""),[z,be]=n.useState(""),[B,De]=n.useState(""),[Z,he]=n.useState(1),[Re,Q]=n.useState([]),[Oe,xe]=n.useState(""),[Te,Ae]=n.useState(""),[Pe,Fe]=n.useState(""),[qe,$]=n.useState([]),[Ne,J]=n.useState(""),[_e,j]=n.useState(!1),[G,Ue]=n.useState(""),[V]=n.useState([]),W=n.useRef(""),X=n.useRef(""),v=n.useRef(""),ee=n.useRef(""),te=n.useRef(""),H=n.useRef(""),ne=n.useRef(""),oe=n.useRef(""),se=n.useRef(""),Be=n.useRef(""),re=n.useRef("");_.extend(Ge),_.extend(ke);const f=ze(),{lang:F,setIsUpdate:Ke,setLoading:Qe}=n.useContext(Ze),{globalSetting:O}=Ye(),L=n.useMemo(()=>{const s=new Date;s.setDate(s.getDate()-B);let t=S==null?void 0:S.map(e=>{const a=new Date(e==null?void 0:e.updatedAt).toLocaleString("en-US",{timeZone:O==null?void 0:O.default_time_zone});return{...e,updatedDate:a==="Invalid Date"?"":a}});if(f.pathname==="/dashboard"){const e=t==null?void 0:t.filter(d=>d.status==="Pending");Se(e);const a=t==null?void 0:t.filter(d=>d.status==="Processing");Ce(a);const u=t==null?void 0:t.filter(d=>d.status==="Delivered");Le(u);const i=t==null?void 0:t.filter(d=>_(d.createdAt).isToday()),p=i==null?void 0:i.reduce((d,N)=>d+N.total,0);xe(p);const o=t==null?void 0:t.filter(d=>_(d.createdAt).isBetween(new Date().setDate(new Date().getDate()-30),new Date)),r=o==null?void 0:o.reduce((d,N)=>d+N.total,0);Ae(r);const Ee=t==null?void 0:t.reduce((d,N)=>d+N.total,0);Fe(Ee)}return x&&(t=t.filter(e=>e.parent===x)),m==="Low"&&(t=t.sort((e,a)=>e.price<a.price&&-1)),m==="High"&&(t=t.sort((e,a)=>e.price>a.price&&-1)),w&&(t=t.filter(e=>{var a;return(a=e==null?void 0:e.title)==null?void 0:a.toLowerCase().includes(w.toLowerCase())})),g&&(t=t.filter(e=>{var a,u,i;return((u=(a=e==null?void 0:e.title[F])==null?void 0:a.toLowerCase())==null?void 0:u.includes(g==null?void 0:g.toLowerCase()))||((i=e==null?void 0:e.attribute)==null?void 0:i.toLowerCase().includes(g==null?void 0:g.toLowerCase()))})),C&&(t=t.filter(e=>{var a,u,i;return((u=(a=e==null?void 0:e.name[F])==null?void 0:a.toLowerCase())==null?void 0:u.includes(C==null?void 0:C.toLowerCase()))||((i=e==null?void 0:e.category)==null?void 0:i.toLowerCase().includes(C==null?void 0:C.toLowerCase()))})),z&&(t=t.filter(e=>e.role===z)),l&&(t=t.filter(e=>{var a,u,i;return((a=e==null?void 0:e.name[F])==null?void 0:a.toLowerCase().includes(l.toLowerCase()))||((u=e==null?void 0:e.phone)==null?void 0:u.toLowerCase().includes(l.toLowerCase()))||((i=e==null?void 0:e.email)==null?void 0:i.toLowerCase().includes(l.toLowerCase()))})),c&&(t=t==null?void 0:t.filter(e=>{var a,u,i;return((u=(a=e==null?void 0:e.title[F])==null?void 0:a.toLowerCase())==null?void 0:u.includes(c==null?void 0:c.toLowerCase()))||((i=e==null?void 0:e.couponCode)==null?void 0:i.toLowerCase().includes(c==null?void 0:c.toLowerCase()))})),Y&&(t=t.filter(e=>e.status===Y)),R&&(t=t.filter(e=>e.contact.toLowerCase().includes(R.toLowerCase()))),B&&(t=t.filter(e=>_(e.createdAt).isBetween(s,new Date))),A&&(t=t.filter(e=>{var a,u;return((a=e==null?void 0:e.name)==null?void 0:a.toLowerCase().includes(A.toLowerCase()))||((u=e==null?void 0:e.iso_code)==null?void 0:u.toLowerCase().includes(A.toLowerCase()))})),G&&(t=t.filter(e=>e==null?void 0:e.name.toLowerCase().includes(G.toLowerCase()))),P&&(t=t.filter(e=>e.name.toLowerCase().includes(P.toLowerCase())||e.iso_code.toLowerCase().includes(P.toLowerCase())||e.language_code.toLowerCase().includes(P.toLowerCase()))),M&&(t=t.filter(e=>e.iso_code.toLowerCase().includes(M.toLowerCase()))),t},[B,S,f.pathname,x,m,w,g,C,z,l,c,Y,R,A,G,P,M,H,O==null?void 0:O.default_time_zone,F]),E=20,Je=L==null?void 0:L.length,je=s=>{he(s)};return n.useEffect(()=>{Q(L==null?void 0:L.slice((Z-1)*E,Z*E))},[L,Z,E]),{userRef:v,searchRef:X,couponRef:ee,orderRef:te,categoryRef:H,attributeRef:ne,pending:fe,processing:we,delivered:ge,todayOrder:Oe,monthlyOrder:Te,totalOrder:Pe,setFilter:T,setSortedField:b,setStatus:ye,setRole:be,time:B,zone:le,setTime:De,taxRef:Be,setZone:ce,filename:Ne,countryRef:oe,dataTable:Re,serviceData:L,country:A,setSearchText:D,setCountry:K,isDisabled:_e,languageRef:se,currencyRef:W,shippingRef:re,setSearchUser:h,setDataTable:Q,setCategoryType:k,handleChangePage:je,totalResults:Je,resultsPerPage:E,handleOnDrop:s=>{for(let t=0;t<s.length;t++)V.push(s[t].data)},setSearchCoupon:y,setAttributeTitle:q,handleSelectFile:s=>{var a;s.preventDefault();const t=new FileReader,e=(a=s.target)==null?void 0:a.files[0];e&&e.type==="application/json"?(J(e==null?void 0:e.name),j(!0),console.log("if"),t.readAsText(e,"UTF-8"),t.onload=u=>{let i=JSON.parse(u.target.result),p=[];f.pathname==="/categories"&&(p=i.map(o=>({_id:o._id,id:o.id,status:o.status,name:o.name,description:o.description,parentName:o.parentName,parentId:o.parentId,icon:o.icon}))),f.pathname==="/attributes"&&(p=i.map(o=>({_id:o._id,status:o.status,title:o.title,name:o.name,variants:o.variants,option:o.option,type:o.type}))),f.pathname==="/coupons"&&(p=i.map(o=>({title:o.title,couponCode:o.couponCode,endTime:o.endTime,discountPercentage:o.discountPercentage,minimumAmount:o.minimumAmount,productType:o.productType,logo:o.logo,discountType:o.discountType,status:o.status}))),f.pathname==="/customers"&&(p=i.map(o=>({name:o.name,email:o.email,password:o.password,phone:o.phone}))),$(p)}):e&&e.type==="text/csv"?(J(e==null?void 0:e.name),j(!0),console.log("else if"),t.onload=async u=>{const i=u.target.result,p=await Me().fromString(i);let o=[];f.pathname==="/categories"&&(o=p.map(r=>({_id:r._id,id:r.id,status:r.status,name:JSON.parse(r.name),description:JSON.parse(r.description),parentName:r.parentName,parentId:r.parentId,icon:r.icon}))),f.pathname==="/attributes"&&(o=p.map(r=>({status:r.status,title:JSON.parse(r.title),name:JSON.parse(r.name),variants:JSON.parse(r.variants),option:r.option,type:r.type}))),f.pathname==="/coupons"&&(o=p.map(r=>({title:JSON.parse(r.title),couponCode:r.couponCode,endTime:r.endTime,discountPercentage:r.discountPercentage?JSON.parse(r.discountPercentage):0,minimumAmount:r.minimumAmount?JSON.parse(r.minimumAmount):0,productType:r.productType,logo:r.logo,status:r.status}))),f.pathname==="/customers"&&(o=p.map(r=>({name:r.name,email:r.email,password:r.password,phone:r.phone}))),$(o)},t.readAsText(e)):(J(e==null?void 0:e.name),j(!0),I("Unsupported file type!"))},handleSubmitUser:s=>{s.preventDefault(),h(v.current.value)},handleSubmitForAll:s=>{s.preventDefault(),D(X.current.value)},handleSubmitCoupon:s=>{s.preventDefault(),y(ee.current.value)},handleSubmitOrder:s=>{s.preventDefault(),U(te.current.value)},handleSubmitCategory:s=>{s.preventDefault(),k(H.current.value)},handleSubmitAttribute:s=>{s.preventDefault(),q(ne.current.value)},handleUploadProducts:()=>{if(V.length<1)I("Please upload/select csv file first!");else return I("This feature is disabled for demo!")},handleSubmitCountry:s=>{s.preventDefault(),K(oe.current.value)},handleSubmitCurrency:s=>{s.preventDefault(),me(W.current.value)},handleSubmitShipping:s=>{s.preventDefault(),Ue(re.current.value)},handleSubmitLanguage:s=>{s.preventDefault(),pe(se.current.value)},handleUploadMultiple:s=>I("This feature is disabled for demo!"),handleRemoveSelectFile:s=>{J(""),$([]),setTimeout(()=>j(!1),1e3)}}};export{ke as a,Ge as i,wt as u};
