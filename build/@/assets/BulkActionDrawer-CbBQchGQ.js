import{j as e,e as ee,r as h,S as Y,d as D}from"./index-njudL7fz.js";import{a as ie}from"./index.prod-OrM6KnAV.js";import{C as se,P as ae,A as G,d as J}from"./ProductServices-D2PrCWjo.js";import{C as X}from"./CurrencyServices-DaKVcmHd.js";import{L as te}from"./LanguageServices-DiisRc0f.js";import{n as p,a as M}from"./toast-DX8d8eRH.js";import{R as ce}from"./index-CBoBRqAf.js";import{P as de,M as pe,T as Q}from"./ParentCategory-BNQd-o5V.js";import{a as ge,T as me}from"./DrawerButton-BUY6Djek.js";import{u as ue,j as he,l as xe}from"./Layout-JsXqKSFR.js";import{u as je,E as k}from"./index.esm-2x07zYBF.js";import{L as c}from"./LabelArea-B72Uma4d.js";import{S as A}from"./SwitchToggle-D-nBAwTv.js";const _e=({id:g,name:o,type:v,handleClick:b,isChecked:n})=>e.jsx(e.Fragment,{children:e.jsx("input",{id:g,name:o,type:v,onChange:b,checked:n})}),Fe=({id:g,status:o,category:v,currencyStatusName:b})=>{const n=ee(),{setIsUpdate:d}=h.useContext(Y),x=async t=>{var E,F;try{let a;if(o==="show"?a="hide":a="show",n.pathname==="/categories"||v){const l=await se.updateStatus(t,{status:a});d(!0),p(l.message)}if(n.pathname==="/products"){const l=await ae.updateStatus(t,{status:a});d(!0),p(l.message)}if(n.pathname==="/languages"){const l=await te.updateStatus(t,{status:a});d(!0),p(l.message)}if(n.pathname==="/currencies")if(b==="status"){const l=await X.updateEnabledStatus(t,{status:a});d(!0),p(l.message)}else{const l=await X.updateLiveExchangeRateStatus(t,{live_exchange_rates:a});d(!0),p(l.message)}if(n.pathname==="/attributes"){const l=await G.updateStatus(t,{status:a});d(!0),p(l.message)}if(n.pathname===`/attributes/${n.pathname.split("/")[2]}`){const l=await G.updateChildStatus(t,{status:a});d(!0),p(l.message)}if(n.pathname==="/coupons"){const l=await J.updateStatus(t,{status:a});d(!0),p(l.message)}if(n.pathname==="/our-staff"){const l=await J.updateStaffStatus(t,{status:a});d(!0),p(l.message)}}catch(a){M(a?(F=(E=a==null?void 0:a.response)==null?void 0:E.data)==null?void 0:F.message:a==null?void 0:a.message)}};return e.jsx(ie,{onChange:()=>x(g),checked:o==="show",className:"react-switch md:ml-0",uncheckedIcon:e.jsx("div",{style:{display:"flex",alignItems:"center",height:"100%",width:120,fontSize:14,color:"white",paddingRight:22,paddingTop:1}}),width:30,height:15,handleDiameter:13,offColor:"#E53E3E",onColor:"#2F855A",checkedIcon:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:73,height:"100%",fontSize:14,color:"white",paddingLeft:20,paddingTop:1}})})},Z=({register:g,name:o,label:v,placeholder:b,required:n,type:d,value:x})=>e.jsx(e.Fragment,{children:e.jsx(D.Textarea,{className:"border text-sm border-gray-200 focus:border-gray-300 block w-full bg-gray-100",...g(`${o}`,{required:n?`${v} is required!`:!1}),type:d,placeholder:b,name:o,value:x,rows:"4",spellCheck:"false"})}),fe=(g,o="en",v)=>{const[b,n]=h.useState(""),[d,x]=h.useState([]),t=ee(),[E,F]=h.useState(""),[a,l]=h.useState(!0),[V,N]=h.useState(!0),[j,q]=h.useState([]),[w,O]=h.useState([]),[z,W]=h.useState(!1),[H,S]=h.useState(""),{isBulkDrawerOpen:L,closeBulkDrawer:C,setIsUpdate:T}=h.useContext(Y),{register:$,handleSubmit:I,watch:B,setValue:i,clearErrors:r,formState:{errors:U}}=je(),K=async P=>{var s,y,m;try{const f={ids:g,categories:j==null?void 0:j.map(u=>u._id),category:(s=w[0])==null?void 0:s._id,productType:[z?"food":"others"],show:P.show,status:a?"show":"hide",tag:JSON.stringify(d)},_={ids:g,status:a?"show":"hide"},R={ids:g,enabled:a?"show":"hide",live_exchange_rates:V?"show":"hide"},re={ids:g,parentId:E,description:P.description,parentName:H,status:a?"show":"hide"},le={ids:g,option:P.option,status:a?"show":"hide"},oe={ids:g,currentId:v,changeId:P.groupName,status:a?"show":"hide"},ne={ids:g,startTime:P.startTime,endTime:P.endTime,status:a?"show":"hide"};if(t.pathname==="/products"){const u=await ae.updateManyProducts(f);T(!0),p(u.message),C()}if(t.pathname==="/coupons"){const u=await J.updateManyCoupons(ne);T(!0),p(u.message),C()}if(t.pathname==="/languages"){const u=await te.updateManyLanguage(_);T(!0),p(u.message),C()}if(t.pathname==="/currencies"){const u=await X.updateManyCurrencies(R);T(!0),p(u.message),C()}if(t.pathname==="/categories"||t.pathname===`/categories/${v}`){const u=await se.updateManyCategory(re);T(!0),p(u.message),C()}if(t.pathname==="/attributes"){const u=await G.updateManyAttribute(le);T(!0),p(u.message),C()}if(t.pathname===`/attributes/${t.pathname.split("/")[2]}`){const u=await G.updateManyChildAttribute(oe);T(!0),p(u.message),C()}}catch(f){M(((m=(y=f==null?void 0:f.response)==null?void 0:y.data)==null?void 0:m.message)||(f==null?void 0:f.message))}};return h.useEffect(()=>{if(!L){i("parent"),i("children"),i("type"),i("show"),i("name"),n(""),x([]),r("parent"),r("children"),r("type"),r("name"),i("name"),i("iso_code"),i("call_prefix"),i("currency"),i("zone"),r("name"),r("iso_code"),r("call_prefix"),r("currency"),r("zone"),r("status"),i("name"),i("iso_code"),i("country"),i("zone"),i("description"),r("name"),r("iso_code"),r("country"),r("zone"),r("status"),r("show"),r("description"),O([]),q([]);return}},[i,L,r]),h.useEffect(()=>{n(B("children"))},[B,b]),{register:$,watch:B,handleSubmit:I,onSubmit:K,errors:U,tag:d,setTag:x,published:a,setPublished:l,published2:V,setPublished2:N,checked:E,setChecked:F,selectedCategory:j,setSelectedCategory:q,defaultCategory:w,setDefaultCategory:O,selectCategoryName:H,setSelectCategoryName:S,isFoodItem:z,setIsFoodItem:W}},Ie=({ids:g,title:o,lang:v,data:b,childId:n,attributes:d,isCheck:x})=>{const{toggleBulkDrawer:t,isBulkDrawerOpen:E,closeBulkDrawer:F}=h.useContext(Y),{showingTranslateValue:a}=ue(),{tag:l,setTag:V,published:N,register:j,onSubmit:q,errors:w,checked:O,setChecked:z,resetRefTwo:W,handleSubmit:H,setPublished:S,selectedCategory:L,setSelectedCategory:C,defaultCategory:T,setDefaultCategory:$,selectCategoryName:I,setSelectCategoryName:B}=fe(g,v,n),i={motionName:"node-motion",motionAppear:!1,onAppearStart:s=>({height:0}),onAppearActive:s=>({height:s.scrollHeight}),onLeaveStart:s=>({height:s.offsetHeight}),onLeaveActive:()=>({height:0})},r=s=>{let y=[];for(let m of s)y.push({title:a(m==null?void 0:m.name),key:m._id,children:m.children.length>0&&r(m.children)});return y},U=(s,y)=>{var m;return s._id===y?s:(m=s==null?void 0:s.children)==null?void 0:m.reduce((f,_)=>f??U(_,y),void 0)},K=s=>{var m,f;const y=x==null?void 0:x.find(_=>_===s);if((x==null?void 0:x.length)===((f=(m=b[0])==null?void 0:m.children)==null?void 0:f.length))return M("This can't be select as a parent category!");if(y!==void 0)return M("This can't be select as a parent category!");if(s===n)return M("This can't be select as a parent category!");{if(s===void 0)return;z(s);const _=b[0],R=U(_,s);B(a(R==null?void 0:R.name))}},P=`
  .rc-tree-child-tree {
    display: hidden;
  }
  .node-motion {
    transition: all .3s;
    overflow-y: hidden;
  }
`;return e.jsx(e.Fragment,{children:e.jsxs(ge,{open:E,onClose:F,parent:null,level:null,placement:"right",children:[e.jsx("button",{onClick:t,className:"absolute z-50 text-red-500 hover:bg-red-100 hover:text-gray-700 transition-colors duration-150 bg-white shadow-md mr-6 mt-6 right-0 left-auto w-10 h-10 rounded-full block text-center",children:e.jsx(he,{className:"mx-auto"})}),e.jsxs("div",{className:"flex flex-col w-full h-full justify-between",children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:e.jsx(me,{title:`Update Selected ${o}`,description:`Apply changes to the selected ${o} from the list`})}),e.jsx(xe.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:H(q),className:"block",children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow w-full h-full max-h-full pb-40 md:pb-32 lg:pb-32 xl:pb-32",children:[o==="Products"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Categorys"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(de,{lang:v,selectedCategory:L,setSelectedCategory:C,setDefaultCategory:$})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Default Category"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(pe,{displayValue:"name",isObject:!0,singleSelect:!0,ref:W,hidePlaceholder:!0,onKeyPressFn:function(){},onRemove:function(){},onSearch:function(){},onSelect:s=>$(s),selectedValues:T,options:L,placeholder:"Default Category"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(A,{handleProcess:S,processOption:N}),e.jsx(k,{errorName:w.status})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Product Tags"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(ce,{placeholder:"Product Tag (Write then press enter to add new tag )",tags:l,onChange:s=>V(s)})})]})]}),o==="Coupons"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Start Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(D.Input,{...j("startTime",{required:"Coupon Validation Start Time"}),label:"Coupon Validation Start Time",name:"startTime",type:"datetime-local",placeholder:"Start Time"}),e.jsx(k,{errorName:w.startTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"End Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(D.Input,{...j("endTime",{required:"Coupon Validation End Time"}),label:"Coupon Validation End Time",name:"endTime",type:"datetime-local",placeholder:"End Time"}),e.jsx(k,{errorName:w.endTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(A,{handleProcess:S,processOption:N}),e.jsx(k,{errorName:w.published})]})]})]}),o==="Languages"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:N,handleProcess:S})})]})}),o==="Currencies"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Enabled"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:N,handleProcess:S})})]})}),o==="Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(Z,{register:j,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(k,{errorName:w.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(D.Input,{readOnly:!0,...j("parent",{required:!1}),name:"parent",value:I||"Home",placeholder:"parent category",type:"text"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:P}}),e.jsx(Q,{treeData:r(b),selectedKeys:[O],onSelect:s=>K(s[0]),motion:i,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:N,handleProcess:S})})]})]}),o==="Child Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(Z,{register:j,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(k,{errorName:w.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(D.Input,{readOnly:!0,...j("parent",{required:!1}),name:"parent",value:I||"Home",placeholder:"parent category",type:"text"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:P}}),e.jsx(Q,{treeData:r(b),selectedKeys:[O],onSelect:s=>K(s[0]),motion:i,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:N,handleProcess:S})})]})]}),o==="Attributes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Options"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(D.Select,{name:"option",...j("option",{required:"Option is required!"}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:"Select type"}),e.jsx("option",{value:"Dropdown",children:"Dropdown"}),e.jsx("option",{value:"Radio",children:"Radio"})]}),e.jsx(k,{errorName:w.option})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:N,handleProcess:S})})]})]}),o==="Attribute Value(s)"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Change Attribute Group"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(D.Select,{name:"groupName",...j("groupName",{required:!1}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:"Select Attribute Group"}),d==null?void 0:d.map((s,y)=>e.jsx("option",{value:s._id,children:a(s==null?void 0:s.name)},y+1))]}),e.jsx(k,{errorName:w.groupName})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:N,handleProcess:S})})]})]})]}),e.jsxs("div",{className:"fixed bottom-0 w-full right-0 py-4 lg:py-8 px-6 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex bg-gray-50 border-t border-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:[e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsx(D.Button,{onClick:t,className:" text-red-500 hover:bg-red-50 hover:border-red-100 hover:text-red-600 dark:bg-gray-700 dark:border-gray-700 dark:text-gray-500 dark:hover:bg-gray-800 dark:hover:text-red-700",layout:"outline",children:"Cancel"})}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(D.Button,{type:"submit",className:"h-12 w-full",children:[" ","Bulk Update ",o]})})]})]})})]})]})})};export{Ie as B,_e as C,Fe as S,Z as T};
