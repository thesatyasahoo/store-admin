import{j as e,d as l,v as F,L as G,r as w,S as B,f as O}from"./index-BJRbsysg.js";import{u as U,i as K,e as Q,f as W,g as X}from"./Layout-BSBHbhJp.js";import{u as J}from"./useAsync-D4eYhAN1.js";import{u as I,M as R}from"./DrawerButton-Blx5qudL.js";import{U as Y}from"./UploadMany-DLoPk0Tq.js";import{N as ee}from"./NotFound-BS6US6Qj.js";import{P as se}from"./ProductServices-Bgi2c1ua.js";import{P as le}from"./PageTitle-DPwqgg-5.js";import{P as M}from"./ProductDrawer-BdhzkVsF.js";import{C as _,S as te,B as ae}from"./BulkActionDrawer-CNjWjKx_.js";import{D as E,E as ie}from"./EditDeleteButton-okk0xG-1.js";import{T as re}from"./Tooltip-BwATunhz.js";import{A as ne,c as oe}from"./browser-iHK-42tw.js";import"./httpService-DFqb7dq4.js";import{a as k}from"./toast-DYbhU_bb.js";import{T as de}from"./TableLoading-CB5-OmYQ.js";import{C as ce}from"./ParentCategory-CFpiXFM2.js";import{A as xe}from"./AnimatedContent-nRTg36fH.js";import"./iconBase-HNZc9kFU.js";import"./useDispatch-BNdujVA7.js";import"./SelectLanguageTwo-D9mV7FP6.js";import"./spinner-CkndCogW.js";import"./exportFromJSON-fDIoOtpr.js";import"./index-B3j9wbPw.js";import"./index.esm-BFk4rQOr.js";import"./InputArea-CfxbsaSI.js";import"./LabelArea-3zJgFG0m.js";import"./InputValue-D8MTyc25.js";import"./Uploader-B4-MPFrp.js";import"./tslib.es6-BgFQhbLt.js";import"./index-BTxcj5iU.js";import"./index.prod-BC__7w9C.js";import"./CurrencyServices-BB77C6j5.js";import"./SwitchToggle-CqQGRQqt.js";const me=({products:g,isCheck:n,setIsCheck:h})=>{const{title:j,serviceId:c,handleModalOpen:t,handleUpdate:y}=I(),{currency:m,showingTranslateValue:S,getNumberTwo:u}=U(),P=s=>{const{id:f,checked:b}=s.target;h([...n,f]),b||h(n.filter(d=>d!==f))};return e.jsxs(e.Fragment,{children:[(n==null?void 0:n.length)<1&&e.jsx(E,{id:c,title:j}),(n==null?void 0:n.length)<2&&e.jsx(R,{children:e.jsx(M,{currency:m,id:c})}),e.jsx(l.TableBody,{children:g==null?void 0:g.map((s,f)=>{var b,d,x,i,p,a,N;return e.jsxs(l.TableRow,{children:[e.jsx(l.TableCell,{children:e.jsx(_,{type:"checkbox",name:(b=s==null?void 0:s.title)==null?void 0:b.en,id:s._id,handleClick:P,isChecked:n==null?void 0:n.includes(s._id)})}),e.jsx(l.TableCell,{children:e.jsxs("div",{className:"flex items-center",children:[s!=null&&s.image[0]?e.jsx(l.Avatar,{className:"hidden p-1 mr-2 md:block bg-gray-50 shadow-none",src:s==null?void 0:s.image[0],alt:"product"}):e.jsx(l.Avatar,{src:"https://res.cloudinary.com/ahossain/image/upload/v1655097002/placeholder_kvepfp.png",alt:"product"}),e.jsx("div",{children:e.jsx("h2",{className:`text-sm font-medium ${(s==null?void 0:s.title.length)>30?"wrap-long-title":""}`,children:(d=S(s==null?void 0:s.title))==null?void 0:d.substring(0,28)})})]})}),e.jsx(l.TableCell,{children:e.jsx("span",{className:"text-sm",children:S((x=s==null?void 0:s.category)==null?void 0:x.name)})}),e.jsx(l.TableCell,{children:e.jsxs("span",{className:"text-sm font-semibold",children:[m,s!=null&&s.isCombination?u((i=s==null?void 0:s.variants[0])==null?void 0:i.originalPrice):u((p=s==null?void 0:s.prices)==null?void 0:p.originalPrice)]})}),e.jsx(l.TableCell,{children:e.jsxs("span",{className:"text-sm font-semibold",children:[m,s!=null&&s.isCombination?u((a=s==null?void 0:s.variants[0])==null?void 0:a.price):u((N=s==null?void 0:s.prices)==null?void 0:N.price)]})}),e.jsx(l.TableCell,{children:e.jsx("span",{className:"text-sm",children:s.stock})}),e.jsx(l.TableCell,{children:s.stock>0?e.jsx(l.Badge,{type:"success",children:F("Selling")}):e.jsx(l.Badge,{type:"danger",children:F("SoldOut")})}),e.jsx(l.TableCell,{children:e.jsx(G,{to:`/product/${s._id}`,className:"flex justify-center text-gray-400 hover:text-emerald-600",children:e.jsx(re,{id:"view",Icon:K,title:F("DetailsTbl"),bgColor:"#10B981"})})}),e.jsx(l.TableCell,{className:"text-center",children:e.jsx(te,{id:s._id,status:s.status})}),e.jsx(l.TableCell,{children:e.jsx(ie,{id:s._id,product:s,isCheck:n,handleUpdate:y,handleModalOpen:t,title:S(s==null?void 0:s.title)})})]},f+1)})})]})},ge=g=>{new ne({allErrors:!0}),w.useContext(B);const[n]=w.useState([]),[h,j]=w.useState([]),[c,t]=w.useState(""),[y,m]=w.useState(!1);return{data:g,filename:c,isDisabled:y,handleSelectFile:async d=>{var p;d.preventDefault();const x=new FileReader,i=(p=d.target)==null?void 0:p.files[0];i&&i.type==="application/json"?(t(i==null?void 0:i.name),m(!0),x.readAsText(i,"UTF-8"),x.onload=a=>{const C=JSON.parse(a.target.result).map(r=>({categories:r.categories,image:r.image,barcode:r.barcode,tag:r.tag,variants:r.variants,status:r.status,prices:r.prices,isCombination:JSON.parse(r.isCombination.toLowerCase()),title:r.title,productId:r.productId,slug:r.slug,sku:r.sku,category:r.category,stock:r.stock,description:r.description}));j(C)}):i&&i.type==="text/csv"?(t(i==null?void 0:i.name),m(!0),x.onload=async a=>{const N=a.target.result,r=(await oe().fromString(N)).map(o=>({categories:JSON.parse(o.categories),image:JSON.parse(o.image),barcode:o.barcode,tag:JSON.parse(o.tag),variants:JSON.parse(o.variants),status:o.status,prices:JSON.parse(o.prices),isCombination:JSON.parse(o.isCombination.toLowerCase()),title:JSON.parse(o.title),productId:o.productId,slug:o.slug,sku:o.sku,category:JSON.parse(o.category),stock:JSON.parse(o.stock),description:JSON.parse(o.description)}));j(r)},x.readAsText(i)):(t(i==null?void 0:i.name),m(!0),k("Unsupported file type!"))},serviceData:g,handleOnDrop:d=>{for(let x=0;x<d.length;x++)n.push(d[x].data)},handleUploadProducts:()=>k("This feature is disabled for demo!"),handleRemoveSelectFile:d=>{t(""),j([]),setTimeout(()=>m(!1),1e3)},handleUploadMultiple:d=>k("This feature is disabled for demo!")}},he=({setCategory:g})=>{const{t:n}=O(),{data:h}=J(ce.getAllCategories),{showingTranslateValue:j}=U();return e.jsx(e.Fragment,{children:e.jsxs(l.Select,{onChange:c=>g(c.target.value),children:[e.jsx("option",{value:"All",defaultValue:!0,hidden:!0,children:n("Category")}),h==null?void 0:h.map(c=>e.jsx("option",{value:c._id,children:j(c==null?void 0:c.name)},c._id))]})})},Ke=()=>{const{title:g,allId:n,serviceId:h,handleDeleteMany:j,handleUpdateMany:c}=I(),{t}=O(),{toggleDrawer:y,lang:m,currentPage:S,handleChangePage:u,searchText:P,category:s,setCategory:f,searchRef:b,handleSubmitForAll:d,sortedField:x,setSortedField:i,limitData:p}=w.useContext(B),{data:a,loading:N,error:C}=J(()=>se.getAllProducts({page:S,limit:p,category:s,title:P,price:x})),[r,o]=w.useState(!1),[T,D]=w.useState([]),L=()=>{o(!r),D(a==null?void 0:a.products.map(A=>A._id)),r&&D([])},H=()=>{f(""),i(""),b.current.value=""},{serviceData:v,filename:V,isDisabled:$,handleSelectFile:Z,handleUploadMultiple:q,handleRemoveSelectFile:z}=ge(a==null?void 0:a.products);return e.jsxs(e.Fragment,{children:[e.jsx(le,{children:t("ProductsPage")}),e.jsx(E,{ids:n,setIsCheck:D,title:g}),e.jsx(ae,{ids:n,title:"Products"}),e.jsx(R,{children:e.jsx(M,{id:h})}),e.jsxs(xe,{children:[e.jsx(l.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(l.CardBody,{className:"",children:e.jsxs("form",{onSubmit:d,className:"py-3 md:pb-0 grid gap-4 lg:gap-6 xl:gap-6 xl:flex",children:[e.jsx("div",{className:"flex-grow-0 sm:flex-grow md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsx(Y,{title:"Products",filename:V,isDisabled:$,totalDoc:a==null?void 0:a.totalDoc,handleSelectFile:Z,handleUploadMultiple:q,handleRemoveSelectFile:z})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(l.Button,{disabled:T.length<1,onClick:()=>c(T),className:"w-full rounded-md h-12 btn-gray text-gray-600",children:[e.jsx("span",{className:"mr-2",children:e.jsx(Q,{})}),t("BulkAction")]})}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(l.Button,{disabled:(T==null?void 0:T.length)<1,onClick:()=>j(T,a.products),className:"w-full rounded-md h-12 bg-red-300 disabled btn-red",children:[e.jsx("span",{className:"mr-2",children:e.jsx(W,{})}),t("Delete")]})}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(l.Button,{onClick:y,className:"w-full rounded-md h-12",children:[e.jsx("span",{className:"mr-2",children:e.jsx(X,{})}),t("AddProduct")]})})]})]})})}),e.jsx(l.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 rounded-t-lg rounded-0 mb-4",children:e.jsx(l.CardBody,{children:e.jsxs("form",{onSubmit:d,className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex",children:[e.jsxs("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx(l.Input,{ref:b,type:"search",name:"search",placeholder:"Search Product"}),e.jsx("button",{type:"submit",className:"absolute right-0 top-0 mt-5 mr-1"})]}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsx(he,{setCategory:f,lang:m})}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(l.Select,{onChange:A=>i(A.target.value),children:[e.jsx("option",{value:"All",defaultValue:!0,hidden:!0,children:t("Price")}),e.jsx("option",{value:"low",children:t("LowtoHigh")}),e.jsx("option",{value:"high",children:t("HightoLow")}),e.jsx("option",{value:"published",children:t("Published")}),e.jsx("option",{value:"unPublished",children:t("Unpublished")}),e.jsx("option",{value:"status-selling",children:t("StatusSelling")}),e.jsx("option",{value:"status-out-of-stock",children:t("StatusStock")}),e.jsx("option",{value:"date-added-asc",children:t("DateAddedAsc")}),e.jsx("option",{value:"date-added-desc",children:t("DateAddedDesc")}),e.jsx("option",{value:"date-updated-asc",children:t("DateUpdatedAsc")}),e.jsx("option",{value:"date-updated-desc",children:t("DateUpdatedDesc")})]})}),e.jsxs("div",{className:"flex items-center gap-2 flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx("div",{className:"w-full mx-1",children:e.jsx(l.Button,{type:"submit",className:"h-12 w-full bg-emerald-700",children:"Filter"})}),e.jsx("div",{className:"w-full mx-1",children:e.jsx(l.Button,{layout:"outline",onClick:H,type:"reset",className:"px-4 md:py-1 py-2 h-12 text-sm dark:bg-gray-700",children:e.jsx("span",{className:"text-black dark:text-gray-200",children:"Reset"})})})]})]})})})]}),N?e.jsx(de,{row:12,col:7,width:160,height:20}):C?e.jsx("span",{className:"text-center mx-auto text-red-500",children:C}):(v==null?void 0:v.length)!==0?e.jsxs(l.TableContainer,{className:"mb-8 rounded-b-lg",children:[e.jsxs(l.Table,{children:[e.jsx(l.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(l.TableCell,{children:e.jsx(_,{type:"checkbox",name:"selectAll",id:"selectAll",isChecked:r,handleClick:L})}),e.jsx(l.TableCell,{children:t("ProductNameTbl")}),e.jsx(l.TableCell,{children:t("CategoryTbl")}),e.jsx(l.TableCell,{children:t("PriceTbl")}),e.jsx(l.TableCell,{children:"Sale Price"}),e.jsx(l.TableCell,{children:t("StockTbl")}),e.jsx(l.TableCell,{children:t("StatusTbl")}),e.jsx(l.TableCell,{className:"text-center",children:t("DetailsTbl")}),e.jsx(l.TableCell,{className:"text-center",children:t("PublishedTbl")}),e.jsx(l.TableCell,{className:"text-right",children:t("ActionsTbl")})]})}),e.jsx(me,{lang:m,isCheck:T,products:a==null?void 0:a.products,setIsCheck:D})]}),e.jsx(l.TableFooter,{children:e.jsx(l.Pagination,{totalResults:a==null?void 0:a.totalDoc,resultsPerPage:p,onChange:u,label:"Product Page Navigation"})})]}):e.jsx(ee,{title:"Product"})]})};export{Ke as default};
